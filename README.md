# Curve - AI ç§‘ç ”å¯¹è¯å¹³å°

<p align="center">
  <img src="public/placeholder.svg" alt="Curve Logo" width="120" height="120">
</p>

<p align="center">
  <strong>ä¸“ä¸ºç§‘ç ”äººå‘˜è®¾è®¡çš„æ™ºèƒ½ AI å¯¹è¯ä¸åä½œå¹³å°</strong>
</p>

<p align="center">
  <a href="#æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</a> â€¢
  <a href="#æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</a> â€¢
  <a href="#å¼€å‘æŒ‡å—">å¼€å‘æŒ‡å—</a>
</p>

---

## ğŸ“– é¡¹ç›®æ¦‚è¿°

Curve æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ AI ç§‘ç ”å¯¹è¯å¹³å°ï¼Œä¸“ä¸ºè¯ç‰©ç ”å‘ã€æ•°æ®åˆ†æå’Œç§‘ç ”æ–‡çŒ®æ£€ç´¢ç­‰åœºæ™¯è®¾è®¡ã€‚å¹³å°æ”¯æŒå¤š Agent åˆ‡æ¢ã€å¯¹è¯åˆ†æ”¯ç®¡ç†ã€åˆ†å­ç»“æ„å¯è§†åŒ–ã€æ™ºèƒ½æ–‡ä»¶å½’æ¡£ç­‰åŠŸèƒ½ï¼Œå¸®åŠ©ç§‘ç ”äººå‘˜é«˜æ•ˆåœ°ä¸ AI è¿›è¡Œäº¤äº’å’Œåä½œã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– å¤š Agent ç³»ç»Ÿ
- **Xtalpi Agent**: åˆ†å­ç»“æ„åˆ†æä¸è¯ç‰©ç ”å‘åŠ©æ‰‹
- **Research Agent**: ç§‘ç ”æ–‡çŒ®æ£€ç´¢ä¸åˆ†æåŠ©æ‰‹  
- **Data Agent**: æ•°æ®åˆ†æä¸å¯è§†åŒ–åŠ©æ‰‹
- **Code Agent**: ç¼–ç¨‹å¼€å‘ä¸ä»£ç å®¡æŸ¥åŠ©æ‰‹

### ğŸŒ³ å¯¹è¯åˆ†æ”¯ç®¡ç†
- ä»ä»»æ„æ¶ˆæ¯åˆ›å»ºåˆ†æ”¯ï¼Œæ¢ç´¢ä¸åŒçš„å¯¹è¯æ–¹å‘
- åˆ†æ”¯å¯è§†åŒ–æ ‘å½¢è§†å›¾
- æ”¯æŒåˆ†æ”¯åˆå¹¶ï¼ˆæ¶ˆæ¯åˆå¹¶/æ‘˜è¦åˆå¹¶ï¼‰
- åˆ†æ”¯é‡å‘½åä¸åˆ é™¤

### ğŸ“ æ™ºèƒ½æ–‡ä»¶ç®¡ç†
- **Smart Folder**: è‡ªåŠ¨å½’æ¡£å¯¹è¯ä¸­çš„è¡¨æ ¼å’Œå›¾ç‰‡
- **File Center**: é›†ä¸­ç®¡ç†é¡¹ç›®æ‰€æœ‰æ–‡ä»¶èµ„äº§
- æ”¯æŒ CSV/JSON/PDB ç­‰å¤šç§æ ¼å¼
- åˆ†å­ç»“æ„å›¾è‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäº SMILESï¼‰

### ğŸ§¬ åˆ†å­æ•°æ®å¤„ç†
- SMILES åˆ†å­å¼è§£æä¸é«˜äº®
- åˆ†å­ç»“æ„ 3D å¯è§†åŒ–ï¼ˆ3Dmol.jsï¼‰
- åˆ†å­å±æ€§è¡¨æ ¼æ¸²æŸ“
- PubChem é›†æˆç”Ÿæˆç»“æ„å›¾

### ğŸ”„ å®æ—¶åä½œ
- é¡¹ç›®çº§åˆ«çš„æ¶ˆæ¯ç®¡ç†
- å¤šåä½œè€…æ”¯æŒ
- å®æ—¶æ¶ˆæ¯åŒæ­¥ï¼ˆSupabase Realtimeï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18.3.x | UI æ¡†æ¶ |
| TypeScript | 5.8.x | ç±»å‹å®‰å…¨ |
| Vite | 5.4.x | æ„å»ºå·¥å…· |
| TailwindCSS | 3.4.x | æ ·å¼æ¡†æ¶ |
| React Router | 6.30.x | è·¯ç”±ç®¡ç† |
| TanStack Query | 5.83.x | æ•°æ®è¯·æ±‚ |
| Radix UI | Latest | æ— éšœç¢ç»„ä»¶ |
| Recharts | 2.15.x | æ•°æ®å¯è§†åŒ– |
| 3Dmol.js | 2.5.x | åˆ†å­3Då¯è§†åŒ– |

### åç«¯æœåŠ¡
| æœåŠ¡ | ç”¨é€” |
|------|------|
| Supabase | æ•°æ®åº“ + è®¤è¯ + å®æ—¶è®¢é˜… + è¾¹ç¼˜å‡½æ•° |
| PostgreSQL | æ•°æ®å­˜å‚¨ |
| Supabase Edge Functions | AI å¯¹è¯ä»£ç† |
| Lovable AI Gateway | LLM æœåŠ¡ä»£ç† |

### æ•°æ®åº“æ¨¡å‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  projects   â”‚â”€â”€â”€â”€<â”‚  branches   â”‚â”€â”€â”€â”€<â”‚  messages   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚collaboratorsâ”‚     â”‚ file_assets â”‚     â”‚ (files JSON)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- pnpm 8+ (æ¨è) æˆ– npm/yarn
- Supabase è´¦å·

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone <repository-url>
cd Curve_Cursor
```

2. **å®‰è£…ä¾èµ–**
```bash
pnpm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# åˆ›å»º .env.local æ–‡ä»¶
cp .env.example .env.local

# å¡«å†™ä»¥ä¸‹å¿…éœ€çš„ç¯å¢ƒå˜é‡
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_PUBLISHABLE_KEY=your_supabase_anon_key
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
pnpm dev
```

5. **è®¿é—®åº”ç”¨**
```
http://localhost:8080
```

### Supabase é…ç½®

1. åˆ›å»º Supabase é¡¹ç›®
2. è¿è¡Œ `supabase/migrations/` ç›®å½•ä¸‹çš„ SQL è¿ç§»è„šæœ¬
3. åœ¨ Edge Functions ä¸­é…ç½® `LOVABLE_API_KEY` ç¯å¢ƒå˜é‡
4. éƒ¨ç½² `chat` è¾¹ç¼˜å‡½æ•°

## ğŸ“ é¡¹ç›®ç»“æ„

```
Curve_Cursor/
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                 # åº”ç”¨å…¥å£ï¼Œè·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ main.tsx                # React æŒ‚è½½ç‚¹
â”‚   â”œâ”€â”€ index.css               # å…¨å±€æ ·å¼ + CSS å˜é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ curve/              # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatArea.tsx    # æ ¸å¿ƒå¯¹è¯åŒºåŸŸ â­
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx     # ä¾§è¾¹æ é¡¹ç›®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx   # å¯¹è¯è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentMessage.tsx # AI æ¶ˆæ¯æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ UserMessage.tsx  # ç”¨æˆ·æ¶ˆæ¯æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ BranchTreeView.tsx # åˆ†æ”¯æ ‘è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartFolderPanel.tsx # æ™ºèƒ½æ–‡ä»¶å¤¹
â”‚   â”‚   â”‚   â”œâ”€â”€ FileCenter.tsx  # æ–‡ä»¶ä¸­å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ MoleculeStructure.tsx # åˆ†å­ç»“æ„3D
â”‚   â”‚   â”‚   â””â”€â”€ ...             # å…¶ä»–ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ui/                 # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ button.tsx
â”‚   â”‚       â”œâ”€â”€ dialog.tsx
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                  # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useProjects.ts      # é¡¹ç›® & æ¶ˆæ¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useBranches.ts      # åˆ†æ”¯ & åä½œè€…ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useFileAssets.ts    # æ–‡ä»¶èµ„äº§ç®¡ç†
â”‚   â”‚   â””â”€â”€ useSmartFolder.ts   # æ™ºèƒ½å½’æ¡£é€»è¾‘
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â””â”€â”€ NavigationContext.tsx # å…¨å±€å¯¼èˆªçŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ MainLayout.tsx      # ä¸»å¸ƒå±€ï¼ˆä¾§æ +å†…å®¹+é¢æ¿ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Index.tsx           # ä¸»é¡µï¼ˆå¯¹è¯é¡µé¢ï¼‰
â”‚   â”‚   â”œâ”€â”€ Agent.tsx           # Agent ç®¡ç†é¡µ
â”‚   â”‚   â””â”€â”€ Workflow.tsx        # å·¥ä½œæµé¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ agents.ts           # Agent å®šä¹‰ä¸æç¤ºè¯
â”‚   â”‚   â”œâ”€â”€ messageUtils.ts     # æ¶ˆæ¯è§£æå·¥å…·
â”‚   â”‚   â”œâ”€â”€ moleculeDataUtils.ts # åˆ†å­æ•°æ®è§£æ
â”‚   â”‚   â””â”€â”€ utils.ts            # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â””â”€â”€ integrations/
â”‚       â””â”€â”€ supabase/
â”‚           â”œâ”€â”€ client.ts       # Supabase å®¢æˆ·ç«¯
â”‚           â””â”€â”€ types.ts        # æ•°æ®åº“ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ config.toml             # Supabase æœ¬åœ°é…ç½®
â”‚   â”œâ”€â”€ functions/
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚       â””â”€â”€ index.ts        # AI å¯¹è¯è¾¹ç¼˜å‡½æ•°
â”‚   â””â”€â”€ migrations/             # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚
â”œâ”€â”€ tailwind.config.ts          # Tailwind é…ç½®
â”œâ”€â”€ vite.config.ts              # Vite æ„å»ºé…ç½®
â””â”€â”€ package.json                # ä¾èµ–é…ç½®
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ ¸å¿ƒæ¦‚å¿µ

#### 1. æ¶ˆæ¯è§£æç³»ç»Ÿ
æ¶ˆæ¯å†…å®¹æ”¯æŒç‰¹æ®Šæ ‡ç­¾è§£æï¼š
- `<reasoning>...</reasoning>` - æ¨ç†è¿‡ç¨‹
- `<tools>...</tools>` - è°ƒç”¨çš„å·¥å…·
- `<conclusion>...</conclusion>` - åˆ†æç»“è®º
- `<molecule-data>...</molecule-data>` - åˆ†å­æ•°æ®è¡¨æ ¼
- `<file name="..." size="...">...</file>` - æ–‡ä»¶é™„ä»¶

#### 2. åˆ†æ”¯ç³»ç»Ÿ
- æ¯ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªè‡ªåŠ¨åˆ›å»ºçš„"ä¸»çº¿"åˆ†æ”¯
- ä»ä»»æ„æ¶ˆæ¯å¯åˆ›å»ºå­åˆ†æ”¯
- åˆ†æ”¯å¯åˆå¹¶å›ä¸»çº¿ï¼ˆæ¶ˆæ¯æˆ–æ‘˜è¦å½¢å¼ï¼‰

#### 3. å®æ—¶åŒæ­¥
- ä½¿ç”¨ Supabase Realtime ç›‘å¬æ•°æ®å˜åŒ–
- é¡¹ç›®ã€æ¶ˆæ¯ã€åˆ†æ”¯ç­‰æ•°æ®å®æ—¶æ›´æ–°

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¼€å‘æ¨¡å¼æ„å»º
pnpm build:dev

# ä»£ç æ£€æŸ¥
pnpm lint

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview
```

### æ·»åŠ æ–° Agent

1. åœ¨ `src/lib/agents.ts` ä¸­æ·»åŠ  Agent å®šä¹‰ï¼š
```typescript
{
  id: "new-agent",
  name: "New Agent",
  description: "æè¿°",
  icon: "ğŸ”¬",
  color: "bg-purple-500",
  systemPrompt: `ä½ çš„ç³»ç»Ÿæç¤ºè¯...`
}
```

2. åœ¨ `supabase/functions/chat/index.ts` ä¸­åŒæ­¥æ·»åŠ  Agent æç¤ºè¯

### æ ·å¼ç³»ç»Ÿ

é¡¹ç›®ä½¿ç”¨ CSS å˜é‡å®ç°ä¸»é¢˜å®šåˆ¶ï¼š
- ä¸»è‰²è°ƒ: `--primary` / XtalPi Blue (#123aff)
- ä¾§è¾¹æ : `--sidebar-bg`, `--sidebar-border`
- æ¶ˆæ¯æ°”æ³¡: `--message-user-bg`, `--message-agent-bg`

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

### projects
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uuid | ä¸»é”® |
| name | text | é¡¹ç›®åç§° |
| icon | text | é¡¹ç›®å›¾æ ‡ |
| author | text | åˆ›å»ºè€… |
| is_active | boolean | æ˜¯å¦æ¿€æ´» |

### branches
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uuid | ä¸»é”® |
| project_id | uuid | æ‰€å±é¡¹ç›® |
| name | text | åˆ†æ”¯åç§° |
| is_main | boolean | æ˜¯å¦ä¸»åˆ†æ”¯ |
| parent_branch_id | uuid | çˆ¶åˆ†æ”¯ |
| branch_point_message_id | uuid | åˆ†æ”¯ç‚¹æ¶ˆæ¯ |

### messages
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uuid | ä¸»é”® |
| project_id | uuid | æ‰€å±é¡¹ç›® |
| branch_id | uuid | æ‰€å±åˆ†æ”¯ |
| role | text | user/assistant |
| content | text | æ¶ˆæ¯å†…å®¹ |
| agent_id | text | ä½¿ç”¨çš„ Agent |
| files | jsonb | é™„ä»¶ä¿¡æ¯ |

### file_assets
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uuid | ä¸»é”® |
| project_id | uuid | æ‰€å±é¡¹ç›® |
| branch_id | uuid | æ‰€å±åˆ†æ”¯ |
| message_id | uuid | æ¥æºæ¶ˆæ¯ |
| name | text | æ–‡ä»¶å |
| type | text | æ–‡ä»¶ç±»å‹ |
| category | text | åˆ†ç±» |
| content | text | æ–‡ä»¶å†…å®¹ |

## ğŸ¨ UI/UX è®¾è®¡è§„èŒƒ

### é¢œè‰²ç³»ç»Ÿ
- **ä¸»è‰²**: XtalPi Blue `#123aff`
- **æ¸å˜**: Blue-Cyan `#1609a0 â†’ #00ffff`
- **æˆåŠŸ**: Green `#00ff9a`
- **èƒŒæ™¯**: Light Gray `#fafafa`

### ç»„ä»¶è§„èŒƒ
- åœ†è§’: `rounded-lg` (8px) / `rounded-xl` (12px)
- é˜´å½±: `shadow-card` / `shadow-lg`
- è¿‡æ¸¡: `transition-all duration-200`

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **é¡¹ç›®éš”ç¦»**: ä¸¥æ ¼çš„ project_id è¿‡æ»¤ï¼Œé˜²æ­¢è·¨é¡¹ç›®æ•°æ®æ³„éœ²
2. **API å¯†é’¥**: æ•æ„Ÿå¯†é’¥å­˜å‚¨åœ¨ Supabase Edge Functions ç¯å¢ƒå˜é‡ä¸­
3. **è¯·æ±‚éªŒè¯**: æ‰€æœ‰ API è¯·æ±‚éœ€æºå¸¦æœ‰æ•ˆçš„ Authorization header

## ğŸ“ License

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

---

<p align="center">
  Built with â¤ï¸ by XtalPi Team
</p>
